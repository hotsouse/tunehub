<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>{% block title %}TuneHub - –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ö–∞—Ç–∞–ª–æ–≥{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéµ</text></svg>">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header / Navigation -->
    <header class="header" id="header">
        <nav class="nav-container">
            <!-- Logo -->
            <a href="{% url 'home' %}" class="logo">
                <i data-lucide="music"></i>
                <span>TuneHub</span>
            </a>
            
            <!-- Navigation Menu -->
            <ul class="nav-menu" id="navMenu">
                <li><a href="{% url 'home' %}" class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="{% url 'music:track_list' %}" class="{% if 'track' in request.path %}active{% endif %}">–¢—Ä–µ–∫–∏</a></li>
                <li><a href="{% url 'music:album_list' %}" class="{% if 'album' in request.path %}active{% endif %}">–ê–ª—å–±–æ–º—ã</a></li>
                <li><a href="{% url 'movies:movie_list' %}" class="{% if 'movies' in request.path %}active{% endif %}">–§–∏–ª—å–º—ã</a></li>
                {% if user.is_authenticated %}
                    <li><a href="{% url 'music:playlist_list' %}">–ü–ª–µ–π–ª–∏—Å—Ç—ã</a></li>
                {% endif %}
            </ul>
            
            <!-- Navigation Actions -->
            <div class="nav-actions">
                <!-- Search Bar -->
                <div class="search-bar">
                    <i data-lucide="search" class="search-icon"></i>
                    <input 
                        type="search" 
                        class="search-input" 
                        placeholder="–ü–æ–∏—Å–∫ –º—É–∑—ã–∫–∏..." 
                        id="globalSearch"
                    >
                </div>
                
                {% if user.is_authenticated %}
                    <!-- User Menu -->
                    <div class="user-menu">
                        <span style="color: var(--text-secondary); margin-right: 1rem;">
                            –ü—Ä–∏–≤–µ—Ç, {{ user.username }}!
                        </span>
                        {% if user.is_staff %}
                        <a href="{% url 'admin_panel' %}" class="btn btn-primary">
                            <i data-lucide="settings"></i>
                            –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
                        </a>
                        {% endif %}
                        <a href="{% url 'accounts:profile' %}" class="btn btn-secondary">
                            <i data-lucide="user"></i>
                            –ü—Ä–æ—Ñ–∏–ª—å
                        </a>
                        <a href="{% url 'accounts:logout' %}" class="btn btn-outline">
                            <i data-lucide="log-out"></i>
                            –í—ã–π—Ç–∏
                        </a>
                    </div>
                {% else %}
                    <!-- Guest Actions -->
                    <a href="{% url 'accounts:login' %}" class="btn btn-secondary">
                        <i data-lucide="log-in"></i>
                        –í–æ–π—Ç–∏
                    </a>
                    <a href="{% url 'accounts:register' %}" class="btn btn-primary">
                        <i data-lucide="user-plus"></i>
                        –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                    </a>
                {% endif %}
                
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </nav>
    </header>
    
    <!-- Main Content -->
    <main style="padding-top: 80px;">
        {% if messages %}
            <div class="container" style="margin-top: 2rem;">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}" style="
                        padding: 1rem 1.5rem;
                        background: {% if message.tags == 'success' %}rgba(16, 185, 129, 0.1){% elif message.tags == 'error' %}rgba(239, 68, 68, 0.1){% else %}rgba(59, 130, 246, 0.1){% endif %};
                        border: 1px solid {% if message.tags == 'success' %}rgba(16, 185, 129, 0.3){% elif message.tags == 'error' %}rgba(239, 68, 68, 0.3){% else %}rgba(59, 130, 246, 0.3){% endif %};
                        border-radius: 12px;
                        color: var(--text-primary);
                        margin-bottom: 1rem;
                        display: flex;
                        align-items: center;
                        gap: 0.75rem;
                    ">
                        <i data-lucide="{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}alert-circle{% else %}info{% endif %}"></i>
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <!-- Brand Column -->
            <div class="footer-brand">
                <a href="{% url 'home' %}" class="logo">
                    <i data-lucide="music"></i>
                    <span>TuneHub</span>
                </a>
                <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Å —Ç—ã—Å—è—á–∞–º–∏ —Ç—Ä–µ–∫–æ–≤, –∞–ª—å–±–æ–º–æ–≤ –∏ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤.</p>
                
                <!-- Social Links -->
                <div class="social-links">
                    <a href="#" class="social-link" aria-label="Twitter">
                        <i data-lucide="twitter"></i>
                    </a>
                    <a href="#" class="social-link" aria-label="Facebook">
                        <i data-lucide="facebook"></i>
                    </a>
                    <a href="#" class="social-link" aria-label="Instagram">
                        <i data-lucide="instagram"></i>
                    </a>
                    <a href="#" class="social-link" aria-label="YouTube">
                        <i data-lucide="youtube"></i>
                    </a>
                </div>
            </div>
            
            <!-- Quick Links -->
            <div class="footer-links">
                <h4>–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h4>
                <ul>
                    <li><a href="{% url 'music:track_list' %}">–í—Å–µ —Ç—Ä–µ–∫–∏</a></li>
                    <li><a href="{% url 'music:album_list' %}">–ê–ª—å–±–æ–º—ã</a></li>
                    <li><a href="{% url 'movies:movie_list' %}">–§–∏–ª—å–º—ã</a></li>
                    {% if user.is_authenticated %}
                        <li><a href="{% url 'music:playlist_list' %}">–ú–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã</a></li>
                    {% endif %}
                </ul>
            </div>
            
            <!-- Support -->
            <div class="footer-links">
                <h4>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h4>
                <ul>
                    <li><a href="#">–ü–æ–º–æ—â—å</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    <li><a href="#">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</a></li>
                </ul>
            </div>
            
            <!-- Legal -->
            <div class="footer-links">
                <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                <ul>
                    <li><a href="#">–û –Ω–∞—Å</a></li>
                    <li><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
                    <li><a href="#">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a></li>
                    <li><a href="{% url 'admin:index' %}">–ê–¥–º–∏–Ω–∫–∞</a></li>
                </ul>
            </div>
        </div>
        
        <!-- Copyright -->
        <div class="footer-bottom">
            <p>&copy; 2024 TuneHub. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. –°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –º—É–∑—ã–∫–∏.</p>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();
        
        // Header scroll effect
        const header = document.getElementById('header');
        let lastScroll = 0;
        
        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
            
            lastScroll = currentScroll;
        });
        
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navMenu = document.getElementById('navMenu');
        
        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                
                // Change icon
                const icon = mobileMenuBtn.querySelector('i');
                if (navMenu.classList.contains('active')) {
                    icon.setAttribute('data-lucide', 'x');
                } else {
                    icon.setAttribute('data-lucide', 'menu');
                }
                lucide.createIcons();
            });
        }
        
        // Global search
        const globalSearch = document.getElementById('globalSearch');
        if (globalSearch) {
            globalSearch.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const query = globalSearch.value.trim();
                    if (query) {
                        window.location.href = `/music/tracks/?search=${encodeURIComponent(query)}`;
                    }
                }
            });
        }
        
        // Close mobile menu on link click
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
                const icon = mobileMenuBtn.querySelector('i');
                icon.setAttribute('data-lucide', 'menu');
                lucide.createIcons();
            });
        });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>